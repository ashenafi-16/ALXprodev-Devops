#!/bin/bash
set -euo pipefail
JSON_FILE="data.json"

if [ ! -s "$JSON_FILE" ]; then
  echo "Error: $JSON_FILE not found or empty" >&2
  exit 1
fi

name=$(jq -r '.name' "$JSON_FILE" | awk '{ sub(".", toupper(substr($0,1,1))); print }')
height=$(jq -r '.height' "$JSON_FILE")
weight=$(jq -r '.weight' "$JSON_FILE")
type=$(jq -r '.types[0].type.name' "$JSON_FILE" | awk '{ sub(".", toupper(substr($0,1,1))); print }')

formatted_height=$(awk -v h="$height" 'BEGIN { printf "%.1f", h/10 }')
formatted_weight=$(awk -v w="$weight" 'BEGIN { wk=w/10; if (wk==int(wk)) printf "%d", int(wk); else printf "%.1f", wk }')

echo "$name is of type $type, weighs ${formatted_weight}kg, and is ${formatted_height}m tall."
